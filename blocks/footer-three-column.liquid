{% liquid
  assign s = block.settings
  assign icon_color = s.icon_accent_color | default: '#c4a84a'
  assign has_social_url = false
  if s.facebook_url != blank or s.instagram_url != blank
    assign has_social_url = true
  endif
  assign logo_image_src = settings.logo
  if s.logo_inverse and settings.logo_inverse != blank
    assign logo_image_src = settings.logo_inverse
  endif
%}

<div
  class="footer-three-column spacing-style"
  style="
    {% render 'spacing-style', settings: s %}
    --footer-three-col-gap-row: {{ s.gap_row }}px;
    --footer-three-col-gap-column: {{ s.gap_column }}px;
    --footer-three-col-gap-list: {{ s.gap_list }}px;
    --footer-three-col-logo-width: {{ s.logo_size }}px;
    --footer-three-col-logo-text-size: {{ s.logo_text_size }}px;
  "
  {{ block.shopify_attributes }}
>
  <div class="footer-three-column__grid">
    {% if s.show_brand %}
      <div class="footer-three-column__col footer-three-column__brand">
        <div class="footer-three-column__brand-inner">
          {% if logo_image_src != blank %}
            <div class="footer-three-column__logo-image">
              {{ logo_image_src | image_url: width: 800 | image_tag: loading: 'lazy', alt: logo_image_src.alt | default: shop.name }}
            </div>
          {% elsif s.logo_line_1 != blank or s.logo_line_2 != blank %}
            <div class="footer-three-column__logo-text">
              {% if s.brand_icon != blank %}
                <div class="footer-three-column__logo-icon">
                  {{ s.brand_icon | image_url: width: 80 | image_tag: loading: 'lazy', alt: '' }}
                </div>
              {% endif %}
              <div class="footer-three-column__logo-lines">
                {% if s.logo_line_1 != blank %}<span class="footer-three-column__logo-line1">{{ s.logo_line_1 }}</span>{% endif %}
                {% if s.logo_line_2 != blank %}<span class="footer-three-column__logo-line2">{{ s.logo_line_2 }}</span>{% endif %}
              </div>
            </div>
          {% endif %}
          {% if s.description != blank %}
            <p class="footer-three-column__description">{{ s.description }}</p>
          {% endif %}
          {% if s.show_social and has_social_url %}
            <div class="footer-three-column__social">
              {% if s.facebook_url != blank %}
                <a href="{{ s.facebook_url }}" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                  <svg class="footer-three-column__social-icon" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="20" height="20">{% render 'icon', icon: 'facebook' %}</svg>
                </a>
              {% endif %}
              {% if s.instagram_url != blank %}
                <a href="{{ s.instagram_url }}" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                  <svg class="footer-three-column__social-icon" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="20" height="20">{% render 'icon', icon: 'instagram' %}</svg>
                </a>
              {% endif %}
            </div>
          {% endif %}
        </div>
      </div>
    {% endif %}

    {% if s.show_products and s.products_menu != blank %}
      <div class="footer-three-column__col footer-three-column__products">
        <p class="footer-three-column__heading">{{ s.products_heading | default: 'PRODUCTS' }}</p>
        <ul class="footer-three-column__list">
          {% for link in s.products_menu.links %}
            <li><a href="{{ link.url }}">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if s.show_contact %}
      <div class="footer-three-column__col footer-three-column__col--right footer-three-column__contact">
        <p class="footer-three-column__heading">{{ s.contact_heading | default: 'CONTACT' }}</p>
        <div class="footer-three-column__contact-list">
          {% if s.contact_email != blank %}
            <a class="footer-three-column__contact-item" href="mailto:{{ s.contact_email }}">
              <svg class="footer-three-column__contact-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" width="18" height="18" aria-hidden="true" focusable="false"><path fill="{{ icon_color }}" d="M28 6H4a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2m-2.2 2L16 14.78L6.2 8ZM4 24V8.91l11.43 7.91a1 1 0 0 0 1.14 0L28 8.91V24Z"/></svg>
              <span>{{ s.contact_email }}</span>
            </a>
          {% endif %}
          {% if s.contact_phone != blank %}
            <a class="footer-three-column__contact-item" href="tel:{{ s.contact_phone | replace: ' ', '' | replace: '(', '' | replace: ')', '' }}">
              <svg class="footer-three-column__contact-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="18" height="18" aria-hidden="true" focusable="false"><path fill="none" stroke="{{ icon_color }}" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.554 6.24L7.171 2.335c-.39-.45-1.105-.448-1.558.006L2.831 5.128c-.828.829-1.065 2.06-.586 3.047a29.207 29.207 0 0 0 13.561 13.58c.986.479 2.216.242 3.044-.587l2.808-2.813c.455-.455.456-1.174.002-1.564l-3.92-3.365c-.41-.352-1.047-.306-1.458.106l-1.364 1.366a.462.462 0 0 1-.553.088a14.557 14.557 0 0 1-5.36-5.367a.463.463 0 0 1 .088-.554l1.36-1.361c.412-.414.457-1.054.101-1.465"/></svg>
              <span>{{ s.contact_phone }}</span>
            </a>
          {% endif %}
          {% if s.contact_address_line_1 != blank or s.contact_address_line_2 != blank or s.contact_address_line_3 != blank %}
            <div class="footer-three-column__contact-item footer-three-column__contact-item--address">
              <svg class="footer-three-column__contact-icon" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg" width="18" height="18" aria-hidden="true" focusable="false"><path fill="{{ icon_color }}" d="M28 4c9.389 0 17 7 17 19c0 4.764-2.679 10.63-5.91 15.974l-.543.885c-.183.294-.367.585-.551.874l-.558.861c-.093.143-.186.284-.28.425l-.561.839l-.563.82l-.56.803l-.556.782l-.55.76l-.542.735l-.531.71l-.519.682l-.749.97l-.708.898l-.66.822l-.207.256c-1.354 1.604-3.627 1.54-4.903 0l-.642-.794l-.692-.874l-.487-.623l-.503-.654l-.783-1.034l-.537-.723l-.546-.747l-.553-.771l-.559-.792l-.562-.812l-.562-.83c-.187-.28-.374-.562-.56-.847l-.558-.86l-.551-.875l-.543-.885C13.679 33.63 11 27.764 11 23c0-12 7.611-19 17-19m0 4c-7.622 0-13 5.682-13 15c0 3.345 1.746 7.812 4.61 12.747l.503.85l.523.859l.544.867l.279.436l.573.876l.592.883l.61.888l.627.892l.644.896l.328.45l.668.9l.605.799l.312.405a2 2 0 0 0 3.163 0l.568-.74l.676-.904l.661-.9l.645-.897l.629-.894l.61-.889c.201-.295.399-.59.593-.884l.574-.877c.47-.73.92-1.45 1.348-2.164l.502-.85C39.255 30.81 41 26.343 41 23c0-9.318-5.378-15-13-15m0 5a8 8 0 1 1 0 16a8 8 0 0 1 0-16m0 4a4 4 0 1 0 0 8a4 4 0 0 0 0-8"/></svg>
              <span>
                {% if s.contact_address_line_1 != blank %}{{ s.contact_address_line_1 }}{% endif %}
                {% if s.contact_address_line_2 != blank %}{% if s.contact_address_line_1 != blank %}<br>{% endif %}{{ s.contact_address_line_2 }}{% endif %}
                {% if s.contact_address_line_3 != blank %}{% if s.contact_address_line_1 != blank or s.contact_address_line_2 != blank %}<br>{% endif %}{{ s.contact_address_line_3 }}{% endif %}
              </span>
            </div>
          {% endif %}
        </div>
      </div>
    {% endif %}
  </div>
</div>

{% stylesheet %}
  .footer-three-column {
    width: 100%;
    grid-column: 1 / -1;
  }
  .footer-three-column__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--footer-three-col-gap-row, 32px) var(--footer-three-col-gap-column, 40px);
    align-items: start;
    text-align: left;
  }
  @media screen and (min-width: 750px) {
    .footer-three-column__grid {
      grid-template-columns: 1fr 1fr 1fr;
    }
    .footer-three-column__col--right {
      justify-self: end;
    }
  }
  .footer-three-column__col {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    min-width: 0;
  }
  .footer-three-column__heading {
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin: 0 0 14px 0;
  }
  .footer-three-column__list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: var(--footer-three-col-gap-list, 14px);
  }
  .footer-three-column__list a {
    color: inherit;
    text-decoration: none;
    font-size: 14px;
    line-height: 1.4;
  }
  .footer-three-column__list a:hover {
    text-decoration: underline;
  }
  .footer-three-column__contact-list {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: var(--footer-three-col-gap-list, 14px);
  }
  .footer-three-column__contact-item {
    display: inline-flex;
    align-items: flex-start;
    gap: 10px;
    text-decoration: none;
    color: inherit;
    font-size: 14px;
    line-height: 1.4;
  }
  .footer-three-column__contact-item:hover {
    text-decoration: underline;
  }
  .footer-three-column__contact-item--address {
    cursor: default;
  }
  .footer-three-column__contact-item--address:hover {
    text-decoration: none;
  }
  .footer-three-column__contact-icon {
    flex-shrink: 0;
    margin-top: 2px;
  }
  .footer-three-column__logo-image img {
    max-width: min(var(--footer-three-col-logo-width, 200px), 100%);
    height: auto;
    display: block;
  }
  .footer-three-column__logo-text {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }
  .footer-three-column__logo-icon {
    flex-shrink: 0;
  }
  .footer-three-column__logo-icon img {
    display: block;
    max-width: 48px;
    height: auto;
  }
  .footer-three-column__logo-lines {
    display: flex;
    flex-direction: column;
  }
  .footer-three-column__logo-line1,
  .footer-three-column__logo-line2 {
    font-size: var(--footer-three-col-logo-text-size, 18px);
    font-weight: 600;
    line-height: 1.2;
    letter-spacing: 0.02em;
  }
  .footer-three-column__description {
    margin: 12px 0 0 0;
    font-size: 14px;
    line-height: 1.5;
    max-width: 320px;
  }
  .footer-three-column__social {
    display: flex;
    gap: 12px;
    margin-top: 16px;
  }
  .footer-three-column__social a {
    color: inherit;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .footer-three-column__social-icon {
    width: 20px;
    height: 20px;
    fill: currentColor;
  }
  @media (max-width: 749px) {
    .footer-three-column {
      margin-right: auto !important;
      margin-left: 0 !important;
      align-self: flex-start !important;
      text-align: left !important;
    }
    .footer-three-column__grid {
      align-items: flex-start;
      text-align: left;
    }
    .footer-three-column__col {
      align-items: flex-start;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Footer three columns",
  "tag": "div",
  "settings": [
    {
      "type": "header",
      "content": "Brand column"
    },
    {
      "type": "checkbox",
      "id": "show_brand",
      "label": "Show brand column",
      "default": true
    },
    {
      "type": "paragraph",
      "content": "Logo is set in Theme settings > Header. Use inverted logo for dark backgrounds (e.g. footer)."
    },
    {
      "type": "checkbox",
      "id": "logo_inverse",
      "label": "Use inverted logo",
      "default": false,
      "info": "Uses the inverted logo from Theme settings when set",
      "visible_if": "{{ settings.logo_inverse }}"
    },
    {
      "type": "range",
      "id": "logo_size",
      "label": "Logo image width",
      "min": 80,
      "max": 320,
      "step": 8,
      "unit": "px",
      "default": 200,
      "info": "Max width when using logo image"
    },
    {
      "type": "range",
      "id": "logo_text_size",
      "label": "Logo text size",
      "min": 14,
      "max": 36,
      "step": 2,
      "unit": "px",
      "default": 18,
      "info": "Font size when using text logo"
    },
    {
      "type": "text",
      "id": "logo_line_1",
      "label": "Logo line 1",
      "default": "STEEL BY"
    },
    {
      "type": "text",
      "id": "logo_line_2",
      "label": "Logo line 2",
      "default": "DESIGN"
    },
    {
      "type": "image_picker",
      "id": "brand_icon",
      "label": "Brand icon / graphic",
      "info": "Optional graphic beside text logo (e.g. window icon)"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Luxury steel doors and glazing, designed and crafted in the UK. Bringing timeless elegance to modern spaces."
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Show social links",
      "default": true
    },
    {
      "type": "url",
      "id": "facebook_url",
      "label": "Facebook URL"
    },
    {
      "type": "url",
      "id": "instagram_url",
      "label": "Instagram URL"
    },
    {
      "type": "header",
      "content": "Products column"
    },
    {
      "type": "checkbox",
      "id": "show_products",
      "label": "Show products column",
      "default": true
    },
    {
      "type": "text",
      "id": "products_heading",
      "label": "Products heading",
      "default": "PRODUCTS"
    },
    {
      "type": "link_list",
      "id": "products_menu",
      "label": "Products menu",
      "info": "Create a menu in Navigation with your product links"
    },
    {
      "type": "header",
      "content": "Contact column"
    },
    {
      "type": "checkbox",
      "id": "show_contact",
      "label": "Show contact column",
      "default": true
    },
    {
      "type": "text",
      "id": "contact_heading",
      "label": "Contact heading",
      "default": "CONTACT"
    },
    {
      "type": "text",
      "id": "contact_email",
      "label": "Email",
      "default": "info@steelydesign.co.uk"
    },
    {
      "type": "text",
      "id": "contact_phone",
      "label": "Phone",
      "default": "+44 (0) 20 1234 5678"
    },
    {
      "type": "text",
      "id": "contact_address_line_1",
      "label": "Address line 1",
      "default": "123 Industrial Estate"
    },
    {
      "type": "text",
      "id": "contact_address_line_2",
      "label": "Address line 2",
      "default": "Design District"
    },
    {
      "type": "text",
      "id": "contact_address_line_3",
      "label": "Address line 3",
      "default": "London, SW1 1AA"
    },
    {
      "type": "color",
      "id": "icon_accent_color",
      "label": "Contact icons color",
      "default": "#c4a84a"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "gap_column",
      "label": "Gap between columns",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "gap_row",
      "label": "Gap between rows (mobile)",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "gap_list",
      "label": "Gap between list items",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 14,
      "info": "Products and contact list spacing"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top padding",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom padding",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "Left padding",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "Right padding",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Footer three columns",
      "category": "t:categories.footer"
    }
  ]
}
{% endschema %}
